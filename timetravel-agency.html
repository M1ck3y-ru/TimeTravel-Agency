<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TimeTravel Agency ‚Äî Explorez l'histoire, r√©invent√©e</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --gold: #c9a84c;
      --gold-light: #e8c97a;
      --gold-dim: #8a6f32;
      --obsidian: #080810;
      --dark1: #0d0d1a;
      --dark2: #111122;
      --dark3: #161628;
      --slate: #1e1e38;
      --text: #e8e4d8;
      --text-dim: #9a9080;
      --paris: #4a90d9;
      --cretace: #2ecc71;
      --florence: #e74c3c;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html { scroll-behavior: smooth; }

    body {
      background: var(--obsidian);
      color: var(--text);
      font-family: 'Cormorant Garamond', Georgia, serif;
      font-size: 18px;
      line-height: 1.7;
      overflow-x: hidden;
    }

    /* ‚îÄ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ‚îÄ */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--dark1); }
    ::-webkit-scrollbar-thumb { background: var(--gold-dim); border-radius: 3px; }

    /* ‚îÄ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ */
    nav {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.2rem 4rem;
      background: linear-gradient(to bottom, rgba(8,8,16,0.95), transparent);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(201,168,76,0.1);
      transition: background 0.4s;
    }

    .nav-logo {
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      font-weight: 700;
      letter-spacing: 0.15em;
      color: var(--gold);
      text-decoration: none;
    }

    .nav-logo span { font-style: italic; color: var(--text-dim); }

    nav ul {
      list-style: none;
      display: flex;
      gap: 2.5rem;
    }

    nav ul a {
      color: var(--text-dim);
      text-decoration: none;
      font-family: 'Space Mono', monospace;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      transition: color 0.3s;
    }

    nav ul a:hover { color: var(--gold); }

    /* ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ */
    #hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      background: radial-gradient(ellipse at 30% 50%, rgba(201,168,76,0.06) 0%, transparent 60%),
                  radial-gradient(ellipse at 70% 80%, rgba(74,144,217,0.05) 0%, transparent 50%),
                  var(--obsidian);
    }

    .stars {
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(1px 1px at 20% 30%, rgba(201,168,76,0.6) 0%, transparent 100%),
        radial-gradient(1px 1px at 80% 10%, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 45% 70%, rgba(201,168,76,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 10% 90%, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 60% 45%, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 90% 60%, rgba(201,168,76,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 35% 20%, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 70% 80%, rgba(255,255,255,0.4) 0%, transparent 100%);
      animation: twinkle 6s ease-in-out infinite alternate;
    }

    @keyframes twinkle {
      0% { opacity: 0.6; }
      100% { opacity: 1; }
    }

    .time-ring {
      position: absolute;
      width: 600px;
      height: 600px;
      border-radius: 50%;
      border: 1px solid rgba(201,168,76,0.1);
      animation: spin 40s linear infinite;
    }

    .time-ring::before {
      content: '';
      position: absolute;
      inset: 30px;
      border-radius: 50%;
      border: 1px dashed rgba(201,168,76,0.08);
    }

    .time-ring::after {
      content: '';
      position: absolute;
      inset: 60px;
      border-radius: 50%;
      border: 1px solid rgba(201,168,76,0.05);
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .hero-content {
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 900px;
      padding: 2rem;
      animation: heroReveal 1.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      opacity: 0;
    }

    @keyframes heroReveal {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hero-eyebrow {
      font-family: 'Space Mono', monospace;
      font-size: 0.65rem;
      letter-spacing: 0.4em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 1.5rem;
      animation: heroReveal 1.4s 0.2s cubic-bezier(0.16, 1, 0.3, 1) both;
    }

    .hero-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(3rem, 8vw, 7rem);
      font-weight: 900;
      line-height: 1.0;
      letter-spacing: -0.01em;
      margin-bottom: 1.5rem;
      animation: heroReveal 1.4s 0.4s cubic-bezier(0.16, 1, 0.3, 1) both;
    }

    .hero-title .italic { font-style: italic; color: var(--gold); }

    .hero-subtitle {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.3rem;
      font-weight: 300;
      color: var(--text-dim);
      max-width: 600px;
      margin: 0 auto 3rem;
      animation: heroReveal 1.4s 0.6s cubic-bezier(0.16, 1, 0.3, 1) both;
    }

    .hero-cta {
      display: flex;
      gap: 1.2rem;
      justify-content: center;
      flex-wrap: wrap;
      animation: heroReveal 1.4s 0.8s cubic-bezier(0.16, 1, 0.3, 1) both;
    }

    .btn-primary {
      padding: 1rem 2.5rem;
      background: var(--gold);
      color: var(--obsidian);
      font-family: 'Space Mono', monospace;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      text-decoration: none;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .btn-primary::after {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(255,255,255,0.2);
      transform: translateX(-100%);
      transition: transform 0.4s;
    }

    .btn-primary:hover::after { transform: translateX(0); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(201,168,76,0.4); }

    .btn-secondary {
      padding: 1rem 2.5rem;
      background: transparent;
      color: var(--text);
      font-family: 'Space Mono', monospace;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      text-decoration: none;
      border: 1px solid rgba(201,168,76,0.3);
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-secondary:hover {
      border-color: var(--gold);
      color: var(--gold);
      transform: translateY(-2px);
    }

    .hero-scroll {
      position: absolute;
      bottom: 2.5rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-dim);
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem;
      letter-spacing: 0.2em;
      animation: bounce 2s ease-in-out infinite;
    }

    .hero-scroll span { font-size: 1.2rem; }

    @keyframes bounce {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(8px); }
    }

    /* ‚îÄ‚îÄ‚îÄ SECTION COMMONS ‚îÄ‚îÄ‚îÄ */
    section { padding: 8rem 4rem; }

    .section-header {
      text-align: center;
      margin-bottom: 5rem;
    }

    .section-tag {
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem;
      letter-spacing: 0.4em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 1rem;
      display: block;
    }

    .section-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 4vw, 3.5rem);
      font-weight: 700;
      line-height: 1.1;
    }

    .section-title em { font-style: italic; color: var(--gold); }

    /* ‚îÄ‚îÄ‚îÄ AGENCY ‚îÄ‚îÄ‚îÄ */
    #agency {
      background: linear-gradient(135deg, var(--dark2) 0%, var(--dark1) 100%);
      border-top: 1px solid rgba(201,168,76,0.1);
      border-bottom: 1px solid rgba(201,168,76,0.1);
    }

    .agency-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6rem;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    .agency-text h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 3vw, 3rem);
      font-weight: 900;
      margin-bottom: 1.5rem;
      line-height: 1.1;
    }

    .agency-text h2 span { color: var(--gold); font-style: italic; }

    .agency-text p {
      color: var(--text-dim);
      margin-bottom: 1.5rem;
      font-size: 1.1rem;
      font-weight: 300;
    }

    .agency-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      margin-top: 3rem;
      padding-top: 3rem;
      border-top: 1px solid rgba(201,168,76,0.15);
    }

    .stat {
      text-align: center;
    }

    .stat-number {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      font-weight: 900;
      color: var(--gold);
      line-height: 1;
    }

    .stat-label {
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-top: 0.5rem;
    }

    .agency-visual {
      position: relative;
    }

    .time-portal {
      width: 100%;
      aspect-ratio: 1;
      max-width: 400px;
      margin: 0 auto;
      position: relative;
    }

    .portal-ring {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      animation: portalSpin 15s linear infinite;
    }

    .portal-ring:nth-child(1) {
      background: conic-gradient(from 0deg, transparent 70%, rgba(201,168,76,0.6) 85%, transparent 100%);
    }

    .portal-ring:nth-child(2) {
      inset: 20px;
      animation-duration: 20s;
      animation-direction: reverse;
      background: conic-gradient(from 120deg, transparent 70%, rgba(74,144,217,0.4) 85%, transparent 100%);
    }

    .portal-ring:nth-child(3) {
      inset: 40px;
      animation-duration: 25s;
      background: conic-gradient(from 240deg, transparent 70%, rgba(46,204,113,0.4) 85%, transparent 100%);
    }

    .portal-center {
      position: absolute;
      inset: 60px;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(201,168,76,0.15) 0%, rgba(8,8,16,0.9) 60%, var(--dark2) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4rem;
    }

    @keyframes portalSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* ‚îÄ‚îÄ‚îÄ DESTINATIONS ‚îÄ‚îÄ‚îÄ */
    #destinations {
      background: var(--obsidian);
    }

    .destinations-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .dest-card {
      position: relative;
      border: 1px solid rgba(201,168,76,0.15);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1), border-color 0.3s;
      background: var(--dark2);
    }

    .dest-card:hover {
      transform: translateY(-8px);
      border-color: rgba(201,168,76,0.5);
    }

    .dest-card:hover .dest-overlay { opacity: 1; }
    .dest-card:hover .dest-info { transform: translateY(0); }
    .dest-card:hover .dest-img-wrap img { transform: scale(1.08); }

    .dest-img-wrap {
      position: relative;
      height: 380px;
      overflow: hidden;
    }

    .dest-img-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);
      display: block;
    }

    .dest-img-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 5rem;
      position: absolute;
      inset: 0;
    }

    .dest-card[data-dest="paris"] .dest-img-placeholder {
      background: linear-gradient(135deg, #1a2a4a 0%, #2d4a7a 40%, #1a3060 100%);
    }

    .dest-card[data-dest="cretace"] .dest-img-placeholder {
      background: linear-gradient(135deg, #0d2a18 0%, #1a4a28 40%, #0a3010 100%);
    }

    .dest-card[data-dest="florence"] .dest-img-placeholder {
      background: linear-gradient(135deg, #3a1a10 0%, #6a2a18 40%, #4a1a0a 100%);
    }

    .dest-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(8,8,16,0.95) 0%, rgba(8,8,16,0.5) 50%, transparent 100%);
      opacity: 0.7;
      transition: opacity 0.4s;
    }

    .dest-badge {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      padding: 0.4rem 1rem;
      border: 1px solid;
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      z-index: 2;
    }

    .dest-card[data-dest="paris"] .dest-badge { border-color: var(--paris); color: var(--paris); background: rgba(74,144,217,0.1); }
    .dest-card[data-dest="cretace"] .dest-badge { border-color: var(--cretace); color: var(--cretace); background: rgba(46,204,113,0.1); }
    .dest-card[data-dest="florence"] .dest-badge { border-color: var(--florence); color: var(--florence); background: rgba(231,76,60,0.1); }

    .dest-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 2rem;
      transform: translateY(20px);
      transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
      z-index: 2;
    }

    .dest-period {
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 0.5rem;
    }

    .dest-name {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem;
      font-weight: 700;
      line-height: 1.1;
      margin-bottom: 0.8rem;
    }

    .dest-desc {
      font-size: 0.9rem;
      color: var(--text-dim);
      font-weight: 300;
      line-height: 1.5;
      margin-bottom: 1.2rem;
    }

    .dest-price {
      display: flex;
      align-items: baseline;
      gap: 0.5rem;
    }

    .dest-price .amount {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--gold);
    }

    .dest-price .currency {
      font-family: 'Space Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-dim);
    }

    .dest-footer {
      padding: 1.5rem 2rem;
      border-top: 1px solid rgba(201,168,76,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .dest-tags {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .dest-tag {
      padding: 0.2rem 0.6rem;
      background: rgba(201,168,76,0.08);
      border: 1px solid rgba(201,168,76,0.15);
      font-family: 'Space Mono', monospace;
      font-size: 0.55rem;
      letter-spacing: 0.1em;
      color: var(--text-dim);
    }

    .dest-btn {
      padding: 0.6rem 1.2rem;
      background: transparent;
      border: 1px solid var(--gold);
      color: var(--gold);
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s;
    }

    .dest-btn:hover {
      background: var(--gold);
      color: var(--obsidian);
    }

    /* ‚îÄ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ‚îÄ */
    #quiz {
      background: linear-gradient(135deg, var(--dark3) 0%, var(--dark1) 100%);
      border-top: 1px solid rgba(201,168,76,0.1);
      border-bottom: 1px solid rgba(201,168,76,0.1);
    }

    .quiz-container {
      max-width: 700px;
      margin: 0 auto;
    }

    .quiz-step {
      display: none;
      animation: fadeIn 0.5s ease forwards;
    }

    .quiz-step.active { display: block; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .quiz-progress {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 3rem;
      justify-content: center;
    }

    .quiz-dot {
      width: 40px;
      height: 3px;
      background: rgba(201,168,76,0.2);
      transition: background 0.3s;
    }

    .quiz-dot.done { background: var(--gold); }

    .quiz-q {
      font-family: 'Playfair Display', serif;
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 2.5rem;
      text-align: center;
    }

    .quiz-q em { font-style: italic; color: var(--gold); }

    .quiz-options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .quiz-opt {
      padding: 1.3rem 2rem;
      border: 1px solid rgba(201,168,76,0.2);
      background: rgba(201,168,76,0.03);
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 1rem;
      text-align: left;
      color: var(--text);
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.1rem;
    }

    .quiz-opt:hover, .quiz-opt.selected {
      border-color: var(--gold);
      background: rgba(201,168,76,0.08);
      color: var(--gold);
      transform: translateX(6px);
    }

    .quiz-opt-icon { font-size: 1.4rem; flex-shrink: 0; }

    /* Quiz Result */
    .quiz-result {
      text-align: center;
      padding: 2rem;
      animation: fadeIn 0.8s ease forwards;
    }

    .quiz-result-icon { font-size: 5rem; margin-bottom: 1.5rem; }

    .quiz-result h3 {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      font-weight: 900;
      color: var(--gold);
      margin-bottom: 1rem;
    }

    .quiz-result p {
      color: var(--text-dim);
      font-size: 1.1rem;
      max-width: 500px;
      margin: 0 auto 2rem;
    }

    .quiz-result-card {
      display: inline-block;
      padding: 2rem 3rem;
      border: 1px solid rgba(201,168,76,0.3);
      background: rgba(201,168,76,0.05);
      margin-bottom: 2rem;
    }

    .quiz-result-loading {
      text-align: center;
      padding: 3rem;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 2px solid rgba(201,168,76,0.2);
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1.5rem;
    }

    .quiz-reset {
      margin-top: 1.5rem;
      background: transparent;
      border: 1px solid rgba(201,168,76,0.3);
      color: var(--text-dim);
      padding: 0.8rem 2rem;
      font-family: 'Space Mono', monospace;
      font-size: 0.65rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s;
    }

    .quiz-reset:hover { border-color: var(--gold); color: var(--gold); }

    /* ‚îÄ‚îÄ‚îÄ CHATBOT ‚îÄ‚îÄ‚îÄ */
    .chat-widget {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      z-index: 200;
    }

    .chat-btn {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: var(--gold);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      box-shadow: 0 8px 30px rgba(201,168,76,0.4);
      transition: all 0.3s;
      position: relative;
    }

    .chat-btn:hover { transform: scale(1.1); box-shadow: 0 12px 40px rgba(201,168,76,0.5); }

    .chat-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      width: 18px;
      height: 18px;
      background: #e74c3c;
      border-radius: 50%;
      border: 2px solid var(--obsidian);
      font-size: 0.55rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-family: 'Space Mono', monospace;
    }

    .chat-window {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 380px;
      height: 550px;
      background: var(--dark2);
      border: 1px solid rgba(201,168,76,0.25);
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transform: scale(0) translateY(20px);
      transform-origin: bottom right;
      transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s;
      opacity: 0;
      pointer-events: none;
    }

    .chat-window.open {
      transform: scale(1) translateY(0);
      opacity: 1;
      pointer-events: all;
    }

    .chat-header {
      padding: 1.2rem 1.5rem;
      background: linear-gradient(135deg, var(--dark3), var(--slate));
      border-bottom: 1px solid rgba(201,168,76,0.15);
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .chat-avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: radial-gradient(circle, var(--gold) 0%, var(--gold-dim) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      flex-shrink: 0;
    }

    .chat-header-info h4 {
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      font-weight: 700;
    }

    .chat-header-info p {
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem;
      color: var(--cretace);
      letter-spacing: 0.1em;
    }

    .chat-close {
      margin-left: auto;
      background: none;
      border: none;
      color: var(--text-dim);
      cursor: pointer;
      font-size: 1.2rem;
      transition: color 0.2s;
    }

    .chat-close:hover { color: var(--gold); }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .chat-messages::-webkit-scrollbar { width: 4px; }
    .chat-messages::-webkit-scrollbar-track { background: transparent; }
    .chat-messages::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.3); border-radius: 2px; }

    .msg {
      max-width: 85%;
      animation: msgIn 0.3s ease forwards;
    }

    @keyframes msgIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .msg.bot { align-self: flex-start; }
    .msg.user { align-self: flex-end; }

    .msg-bubble {
      padding: 0.8rem 1.1rem;
      font-size: 0.9rem;
      line-height: 1.5;
      border-radius: 0;
    }

    .msg.bot .msg-bubble {
      background: rgba(201,168,76,0.08);
      border: 1px solid rgba(201,168,76,0.15);
      border-left: 3px solid var(--gold);
      color: var(--text);
    }

    .msg.user .msg-bubble {
      background: var(--gold);
      color: var(--obsidian);
      font-family: 'Cormorant Garamond', serif;
    }

    .msg-time {
      font-family: 'Space Mono', monospace;
      font-size: 0.55rem;
      color: var(--text-dim);
      margin-top: 0.3rem;
      padding: 0 0.3rem;
    }

    .msg.user .msg-time { text-align: right; }

    .typing-indicator {
      display: flex;
      gap: 4px;
      padding: 0.8rem 1.1rem;
      background: rgba(201,168,76,0.08);
      border: 1px solid rgba(201,168,76,0.15);
      border-left: 3px solid var(--gold);
      width: fit-content;
    }

    .typing-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--gold);
      animation: typingBounce 1.2s ease-in-out infinite;
    }

    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typingBounce {
      0%, 80%, 100% { transform: translateY(0); opacity: 0.4; }
      40% { transform: translateY(-6px); opacity: 1; }
    }

    .chat-suggestions {
      padding: 0 1.5rem 0.8rem;
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .chat-suggest {
      padding: 0.3rem 0.8rem;
      border: 1px solid rgba(201,168,76,0.2);
      background: transparent;
      color: var(--gold);
      font-family: 'Space Mono', monospace;
      font-size: 0.55rem;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.2s;
    }

    .chat-suggest:hover { background: rgba(201,168,76,0.1); }

    .chat-input-area {
      padding: 1rem 1.5rem;
      border-top: 1px solid rgba(201,168,76,0.15);
      display: flex;
      gap: 0.8rem;
      background: var(--dark3);
    }

    .chat-input {
      flex: 1;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(201,168,76,0.2);
      color: var(--text);
      padding: 0.7rem 1rem;
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.95rem;
      resize: none;
      height: 42px;
      outline: none;
      transition: border-color 0.3s;
    }

    .chat-input:focus { border-color: var(--gold); }
    .chat-input::placeholder { color: var(--text-dim); }

    .chat-send {
      width: 42px;
      height: 42px;
      background: var(--gold);
      border: none;
      color: var(--obsidian);
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .chat-send:hover { background: var(--gold-light); transform: scale(1.05); }
    .chat-send:disabled { opacity: 0.5; cursor: not-allowed; }

    /* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
    footer {
      background: var(--dark1);
      border-top: 1px solid rgba(201,168,76,0.15);
      padding: 4rem;
      text-align: center;
    }

    .footer-logo {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--gold);
      margin-bottom: 1rem;
    }

    footer p {
      color: var(--text-dim);
      font-size: 0.9rem;
      max-width: 500px;
      margin: 0 auto 2rem;
    }

    .footer-divider {
      width: 60px;
      height: 1px;
      background: var(--gold-dim);
      margin: 2rem auto;
    }

    .footer-copy {
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem;
      letter-spacing: 0.2em;
      color: var(--text-dim);
    }

    /* ‚îÄ‚îÄ‚îÄ SCROLL ANIMATIONS ‚îÄ‚îÄ‚îÄ */
    .reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .reveal-delay-1 { transition-delay: 0.1s; }
    .reveal-delay-2 { transition-delay: 0.2s; }
    .reveal-delay-3 { transition-delay: 0.3s; }

    /* ‚îÄ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ‚îÄ */
    @media (max-width: 1024px) {
      .destinations-grid { grid-template-columns: 1fr 1fr; }
      .agency-grid { grid-template-columns: 1fr; gap: 3rem; }
      .agency-visual { display: none; }
    }

    @media (max-width: 768px) {
      nav { padding: 1rem 1.5rem; }
      nav ul { display: none; }
      section { padding: 5rem 1.5rem; }
      .destinations-grid { grid-template-columns: 1fr; }
      .chat-window { width: calc(100vw - 2rem); right: -1rem; }
      footer { padding: 3rem 1.5rem; }
    }

    /* ‚îÄ‚îÄ‚îÄ GOLDEN LINE DECORATION ‚îÄ‚îÄ‚îÄ */
    .gold-line {
      display: flex;
      align-items: center;
      gap: 1rem;
      justify-content: center;
      margin: 1.5rem 0;
    }

    .gold-line::before, .gold-line::after {
      content: '';
      height: 1px;
      width: 80px;
      background: linear-gradient(to right, transparent, var(--gold-dim));
    }

    .gold-line::after {
      background: linear-gradient(to left, transparent, var(--gold-dim));
    }

    .gold-diamond {
      width: 6px;
      height: 6px;
      background: var(--gold);
      transform: rotate(45deg);
    }
  </style>
</head>
<body>

<!-- ‚îÄ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ‚îÄ -->
<nav>
  <a href="#" class="nav-logo">Time<span>Travel</span></a>
  <ul>
    <li><a href="#agency">L'Agence</a></li>
    <li><a href="#destinations">Destinations</a></li>
    <li><a href="#quiz">Quiz</a></li>
    <li><a href="#" onclick="openChat()">Conseiller</a></li>
  </ul>
</nav>

<!-- ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ -->
<section id="hero">
  <div class="stars"></div>
  <div class="time-ring"></div>
  <div class="hero-content">
    <p class="hero-eyebrow">‚ú¶ Agence de voyage temporel de luxe ‚ú¶</p>
    <h1 class="hero-title">
      Explorez<br>
      <span class="italic">l'Histoire,</span><br>
      R√©invent√©e
    </h1>
    <p class="hero-subtitle">
      Trois √©poques l√©gendaires vous attendent. Paris 1889, le Cr√©tac√©, Florence 1504 ‚Äî 
      des exp√©riences uniques fa√ßonn√©es par deux millions d'ann√©es d'√©volution humaine.
    </p>
    <div class="hero-cta">
      <a href="#destinations" class="btn-primary">D√©couvrir les destinations</a>
      <a href="#quiz" class="btn-secondary">Trouver mon √©poque</a>
    </div>
  </div>
  <div class="hero-scroll">
    SCROLL <span>‚Üì</span>
  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ AGENCY ‚îÄ‚îÄ‚îÄ -->
<section id="agency">
  <div class="agency-grid">
    <div class="agency-text">
      <span class="section-tag">Notre histoire</span>
      <h2>Le luxe du <span>temps perdu</span></h2>
      <div class="gold-line"><div class="gold-diamond"></div></div>
      <p>
        Fond√©e en 2024, TimeTravel Agency r√©volutionne le concept m√™me du voyage. 
        Nos capsules temporelles de derni√®re g√©n√©ration transportent nos clients 
        vers les moments les plus fascinants de l'histoire humaine ‚Äî et pr√©humaine.
      </p>
      <p>
        Chaque exp√©rience est con√ßue dans le moindre d√©tail par nos historiens, 
        arch√©ologues et ing√©nieurs quantiques pour garantir authenticit√©, s√©curit√© 
        et √©merveillement absolu.
      </p>
      <div class="agency-stats">
        <div class="stat">
          <div class="stat-number">3</div>
          <div class="stat-label">Destinations</div>
        </div>
        <div class="stat">
          <div class="stat-number">12K+</div>
          <div class="stat-label">Voyageurs</div>
        </div>
        <div class="stat">
          <div class="stat-number">100%</div>
          <div class="stat-label">Retour garanti</div>
        </div>
      </div>
    </div>
    <div class="agency-visual">
      <div class="time-portal">
        <div class="portal-ring"></div>
        <div class="portal-ring"></div>
        <div class="portal-ring"></div>
        <div class="portal-center">‚åö</div>
      </div>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ DESTINATIONS ‚îÄ‚îÄ‚îÄ -->
<section id="destinations">
  <div class="section-header">
    <span class="section-tag">Nos voyages</span>
    <h2 class="section-title">Trois <em>√©poques</em>, un seul choix</h2>
    <div class="gold-line"><div class="gold-diamond"></div></div>
  </div>

  <div class="destinations-grid">

    <!-- Paris 1889 -->
    <div class="dest-card reveal" data-dest="paris">
      <div class="dest-img-wrap">
        <div class="dest-img-placeholder">üóº</div>
        <div class="dest-overlay"></div>
        <div class="dest-badge">Belle √âpoque</div>
        <div class="dest-info">
          <div class="dest-period">Paris ‚Äî 1889</div>
          <h3 class="dest-name">L'Exposition Universelle</h3>
          <p class="dest-desc">
            Assistez √† l'inauguration de la Tour Eiffel, fl√¢nez sur les Champs-√âlys√©es 
            et vivez l'effervescence artistique de la Belle √âpoque.
          </p>
          <div class="dest-price">
            <span class="amount">8 500</span>
            <span class="currency">‚Ç¨ / personne</span>
          </div>
        </div>
      </div>
      <div class="dest-footer">
        <div class="dest-tags">
          <span class="dest-tag">Culture</span>
          <span class="dest-tag">Architecture</span>
          <span class="dest-tag">Gastronomie</span>
        </div>
        <button class="dest-btn" onclick="sendToChat('Je veux en savoir plus sur Paris 1889')">Explorer ‚Üí</button>
      </div>
    </div>

    <!-- Cr√©tac√© -->
    <div class="dest-card reveal reveal-delay-1" data-dest="cretace">
      <div class="dest-img-wrap">
        <div class="dest-img-placeholder">ü¶ï</div>
        <div class="dest-overlay"></div>
        <div class="dest-badge">-65 000 000 ans</div>
        <div class="dest-info">
          <div class="dest-period">Cr√©tac√© ‚Äî √àre M√©sozo√Øque</div>
          <h3 class="dest-name">Jurassique Sauvage</h3>
          <p class="dest-desc">
            Observez les dinosaures dans leur habitat naturel depuis notre capsule 
            blind√©e. Tric√©ratops, V√©lociraptor, T-Rex ‚Äî √† 50 m√®tres seulement.
          </p>
          <div class="dest-price">
            <span class="amount">15 000</span>
            <span class="currency">‚Ç¨ / personne</span>
          </div>
        </div>
      </div>
      <div class="dest-footer">
        <div class="dest-tags">
          <span class="dest-tag">Aventure</span>
          <span class="dest-tag">Nature</span>
          <span class="dest-tag">Faune</span>
        </div>
        <button class="dest-btn" onclick="sendToChat('Parlez-moi du voyage au Cr√©tac√©')">Explorer ‚Üí</button>
      </div>
    </div>

    <!-- Florence 1504 -->
    <div class="dest-card reveal reveal-delay-2" data-dest="florence">
      <div class="dest-img-wrap">
        <div class="dest-img-placeholder">üé®</div>
        <div class="dest-overlay"></div>
        <div class="dest-badge">Renaissance</div>
        <div class="dest-info">
          <div class="dest-period">Florence ‚Äî 1504</div>
          <h3 class="dest-name">Apog√©e de la Renaissance</h3>
          <p class="dest-desc">
            Rencontrez Michel-Ange au travail, visitez les premiers ateliers de 
            L√©onard de Vinci et assistez √† la naissance de l'art occidental.
          </p>
          <div class="dest-price">
            <span class="amount">9 800</span>
            <span class="currency">‚Ç¨ / personne</span>
          </div>
        </div>
      </div>
      <div class="dest-footer">
        <div class="dest-tags">
          <span class="dest-tag">Art</span>
          <span class="dest-tag">Histoire</span>
          <span class="dest-tag">Architecture</span>
        </div>
        <button class="dest-btn" onclick="sendToChat('Dites-moi tout sur Florence 1504')">Explorer ‚Üí</button>
      </div>
    </div>

  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ‚îÄ -->
<section id="quiz">
  <div class="section-header reveal">
    <span class="section-tag">Personnalisation</span>
    <h2 class="section-title">Quel <em>voyageur</em> √™tes-vous ?</h2>
    <div class="gold-line"><div class="gold-diamond"></div></div>
    <p style="color:var(--text-dim); margin-top:1rem; max-width:500px; margin-left:auto; margin-right:auto;">
      R√©pondez √† 4 questions et notre IA vous recommande votre destination id√©ale.
    </p>
  </div>

  <div class="quiz-container">
    <div class="quiz-progress">
      <div class="quiz-dot done" id="dot-0"></div>
      <div class="quiz-dot" id="dot-1"></div>
      <div class="quiz-dot" id="dot-2"></div>
      <div class="quiz-dot" id="dot-3"></div>
    </div>

    <!-- Step 0 -->
    <div class="quiz-step active" id="step-0">
      <div class="quiz-q">Quel type d'<em>exp√©rience</em> recherchez-vous ?</div>
      <div class="quiz-options">
        <button class="quiz-opt" onclick="nextStep(0, 'culturelle', this)">
          <span class="quiz-opt-icon">üé≠</span>
          <div>
            <strong>Culturelle & Artistique</strong><br>
            <small style="color:var(--text-dim)">Mus√©es, art, architecture, patrimoine</small>
          </div>
        </button>
        <button class="quiz-opt" onclick="nextStep(0, 'aventure', this)">
          <span class="quiz-opt-icon">ü¶ï</span>
          <div>
            <strong>Aventure & Nature</strong><br>
            <small style="color:var(--text-dim)">Exploration, faune sauvage, adr√©naline</small>
          </div>
        </button>
        <button class="quiz-opt" onclick="nextStep(0, 'raffinement', this)">
          <span class="quiz-opt-icon">‚ú®</span>
          <div>
            <strong>√âl√©gance & Raffinement</strong><br>
            <small style="color:var(--text-dim)">Gastronomie, vie mondaine, belle soci√©t√©</small>
          </div>
        </button>
      </div>
    </div>

    <!-- Step 1 -->
    <div class="quiz-step" id="step-1">
      <div class="quiz-q">Votre <em>p√©riode</em> pr√©f√©r√©e ?</div>
      <div class="quiz-options">
        <button class="quiz-opt" onclick="nextStep(1, 'moderne', this)">
          <span class="quiz-opt-icon">üóº</span>
          <div>
            <strong>Histoire moderne (XIXe-XXe si√®cle)</strong><br>
            <small style="color:var(--text-dim)">R√©volution industrielle, Belle √âpoque</small>
          </div>
        </button>
        <button class="quiz-opt" onclick="nextStep(1, 'anciens', this)">
          <span class="quiz-opt-icon">üåø</span>
          <div>
            <strong>Temps anciens & origines</strong><br>
            <small style="color:var(--text-dim)">Pr√©histoire, m√©sozo√Øque, origines de la vie</small>
          </div>
        </button>
        <button class="quiz-opt" onclick="nextStep(1, 'renaissance', this)">
          <span class="quiz-opt-icon">üé®</span>
          <div>
            <strong>Renaissance & classicisme</strong><br>
            <small style="color:var(--text-dim)">Humanisme, red√©couverte de l'antiquit√©</small>
          </div>
        </button>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="quiz-step" id="step-2">
      <div class="quiz-q">Vous pr√©f√©rez :</div>
      <div class="quiz-options">
        <button class="quiz-opt" onclick="nextStep(2, 'urbaine', this)">
          <span class="quiz-opt-icon">üåÜ</span>
          <div>
            <strong>L'effervescence urbaine</strong><br>
            <small style="color:var(--text-dim)">Caf√©s, salons, rues anim√©es</small>
          </div>
        </button>
        <button class="quiz-opt" onclick="nextStep(2, 'sauvage', this)">
          <span class="quiz-opt-icon">üåã</span>
          <div>
            <strong>La nature sauvage</strong><br>
            <small style="color:var(--text-dim)">Paysages vierges, faune exceptionnelle</small>
          </div>
        </button>
        <button class="quiz-opt" onclick="nextStep(2, 'art', this)">
          <span class="quiz-opt-icon">üèõÔ∏è</span>
          <div>
            <strong>L'art & l'architecture</strong><br>
            <small style="color:var(--text-dim)">Ateliers, cath√©drales, cr√©ations</small>
          </div>
        </button>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="quiz-step" id="step-3">
      <div class="quiz-q">Votre activit√© <em>id√©ale</em> :</div>
      <div class="quiz-options">
        <button class="quiz-opt" onclick="nextStep(3, 'monuments', this)">
          <span class="quiz-opt-icon">üóΩ</span>
          <div>
            <strong>Visiter des monuments embl√©matiques</strong><br>
            <small style="color:var(--text-dim)">Tour Eiffel, Palais, Expositions</small>
          </div>
        </button>
        <button class="quiz-opt" onclick="nextStep(3, 'faune', this)">
          <span class="quiz-opt-icon">ü¶ñ</span>
          <div>
            <strong>Observer la faune pr√©historique</strong><br>
            <small style="color:var(--text-dim)">Dinosaures, v√©g√©tation primitive</small>
          </div>
        </button>
        <button class="quiz-opt" onclick="nextStep(3, 'musees', this)">
          <span class="quiz-opt-icon">üñºÔ∏è</span>
          <div>
            <strong>Explorer ateliers & mus√©es</strong><br>
            <small style="color:var(--text-dim)">Michel-Ange, L√©onard, Rapha√´l</small>
          </div>
        </button>
      </div>
    </div>

    <!-- Result -->
    <div class="quiz-step" id="step-result">
      <div id="quiz-result-content"></div>
    </div>

  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ -->
<footer>
  <div class="footer-logo">TimeTravel Agency</div>
  <div class="gold-line"><div class="gold-diamond"></div></div>
  <p>Une agence fictive cr√©√©e dans le cadre d'un projet p√©dagogique M1/M2 Digital & IA. 
  Toutes destinations temporelles sont simul√©es.</p>
  <div class="footer-divider"></div>
  <p class="footer-copy">¬© 2024 TimeTravel Agency ‚Äî Projet p√©dagogique ‚Äî Webapp cr√©√©e avec Claude AI (Anthropic)</p>
</footer>

<!-- ‚îÄ‚îÄ‚îÄ CHATBOT WIDGET ‚îÄ‚îÄ‚îÄ -->
<div class="chat-widget">
  <div class="chat-window" id="chatWindow">
    <div class="chat-header">
      <div class="chat-avatar">‚åö</div>
      <div class="chat-header-info">
        <h4>Chronos ‚Äî Conseiller IA</h4>
        <p>‚óè En ligne ¬∑ Temps de r√©ponse &lt; 30s</p>
      </div>
      <button class="chat-close" onclick="closeChat()">‚úï</button>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="msg bot">
        <div class="msg-bubble">
          Bienvenue chez <strong>TimeTravel Agency</strong> ! Je suis Chronos, votre conseiller en voyages temporels. üï∞Ô∏è<br><br>
          Je peux vous renseigner sur nos trois destinations exclusives : <strong>Paris 1889</strong>, le <strong>Cr√©tac√©</strong> et <strong>Florence 1504</strong>. Comment puis-je vous aider ?
        </div>
        <div class="msg-time">Maintenant</div>
      </div>
    </div>
    <div class="chat-suggestions">
      <button class="chat-suggest" onclick="sendToChat('Quelles sont vos destinations ?')">Destinations</button>
      <button class="chat-suggest" onclick="sendToChat('Quels sont les prix ?')">Tarifs</button>
      <button class="chat-suggest" onclick="sendToChat('Comment fonctionne le voyage temporel ?')">Comment √ßa marche ?</button>
    </div>
    <div class="chat-input-area">
      <textarea class="chat-input" id="chatInput" placeholder="Posez-moi vos questions sur les voyages temporels..." rows="1" onkeydown="handleChatKey(event)"></textarea>
      <button class="chat-send" id="chatSend" onclick="sendMessage()">‚û§</button>
    </div>
  </div>
  <button class="chat-btn" onclick="toggleChat()" id="chatBtnEl">
    üí¨
    <span class="chat-badge">1</span>
  </button>
</div>

<script>
  // ‚îÄ‚îÄ‚îÄ QUIZ LOGIC ‚îÄ‚îÄ‚îÄ
  let quizAnswers = [];
  let currentStep = 0;

  function nextStep(stepIndex, answer, btn) {
    quizAnswers[stepIndex] = answer;
    btn.classList.add('selected');

    setTimeout(() => {
      document.getElementById('step-' + stepIndex).classList.remove('active');
      currentStep = stepIndex + 1;

      if (currentStep < 4) {
        document.getElementById('step-' + currentStep).classList.add('active');
        document.getElementById('dot-' + currentStep).classList.add('done');
      } else {
        document.getElementById('step-result').classList.add('active');
        showQuizResult();
      }
    }, 400);
  }

  function showQuizResult() {
    const container = document.getElementById('quiz-result-content');
    container.innerHTML = `
      <div class="quiz-result-loading">
        <div class="spinner"></div>
        <p style="color:var(--text-dim); font-family:'Space Mono',monospace; font-size:0.7rem; letter-spacing:0.2em;">
          ANALYSE DE VOS PR√âF√âRENCES...
        </p>
      </div>
    `;

    // Determine result from answers
    setTimeout(async () => {
      const dest = getRecommendedDestination();
      await renderQuizResult(dest, container);
    }, 1500);
  }

  function getRecommendedDestination() {
    const scores = { paris: 0, cretace: 0, florence: 0 };
    const map = {
      culturelle: { paris: 1, florence: 2 },
      aventure: { cretace: 3 },
      raffinement: { paris: 3 },
      moderne: { paris: 3 },
      anciens: { cretace: 3 },
      renaissance: { florence: 3 },
      urbaine: { paris: 2, florence: 1 },
      sauvage: { cretace: 3 },
      art: { florence: 3 },
      monuments: { paris: 3 },
      faune: { cretace: 3 },
      musees: { florence: 3 }
    };

    quizAnswers.forEach(a => {
      if (map[a]) {
        Object.entries(map[a]).forEach(([k, v]) => { scores[k] += v; });
      }
    });

    return Object.entries(scores).sort((a, b) => b[1] - a[1])[0][0];
  }

  const destData = {
    paris: {
      icon: 'üóº',
      name: 'Paris 1889',
      subtitle: 'Belle √âpoque & Exposition Universelle',
      color: 'var(--paris)',
      price: '8 500 ‚Ç¨',
      desc: 'Votre profil de voyageur culturel et raffin√© vous pr√©destine √† la Belle √âpoque parisienne. Vous vivrez l\'effervescence de l\'Exposition Universelle, c√¥toierez les Impressionnistes dans leurs caf√©s et assisterez √† l\'inauguration de la Tour Eiffel dans sa splendeur dor√©e.'
    },
    cretace: {
      icon: 'ü¶ï',
      name: 'Le Cr√©tac√©',
      subtitle: '‚Äî 65 000 000 ans ¬∑ M√©sozo√Øque',
      color: 'var(--cretace)',
      price: '15 000 ‚Ç¨',
      desc: 'Votre esprit d\'aventure et votre fascination pour la nature vous destinent au Cr√©tac√©. Vous observerez des cr√©atures qui n\'existent plus depuis 65 millions d\'ann√©es, dans des paysages d\'une beaut√© primitive incomparable ‚Äî depuis la s√©curit√© absolue de notre capsule blind√©e.'
    },
    florence: {
      icon: 'üé®',
      name: 'Florence 1504',
      subtitle: 'Apog√©e de la Renaissance italienne',
      color: 'var(--florence)',
      price: '9 800 ‚Ç¨',
      desc: 'Votre sensibilit√© artistique et votre amour de l\'histoire vous emm√®nent √† Florence au sommet de la Renaissance. Vous fr√©quenterez les ateliers de Michel-Ange en pleine cr√©ation du David, croiserez L√©onard de Vinci et vivrez la naissance de l\'art occidental moderne.'
    }
  };

  async function renderQuizResult(destKey, container) {
    const d = destData[destKey];
    let personalizedText = d.desc;

    // Try to get AI-generated personalized description
    try {
      const prompt = `Tu es l'assistant IA de TimeTravel Agency. Un client a r√©pondu √† un quiz et ses r√©ponses indiquent: ${quizAnswers.join(', ')}. La destination recommand√©e est ${d.name}. G√©n√®re une description personnalis√©e de 2 phrases (max 80 mots) qui explique pourquoi cette destination est parfaite pour CE client sp√©cifique, en utilisant ses r√©ponses. Sois enthousiaste, √©vocateur, luxury. R√©ponds directement sans intro.`;

      const resp = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          model: 'claude-sonnet-4-5-20250929',
          max_tokens: 150,
          system: "Tu es l'assistant virtuel de TimeTravel Agency, une agence de voyage temporel de luxe. R√©ponds toujours en fran√ßais, de fa√ßon concise et √©vocatrice.",
          messages: [{ role: 'user', content: prompt }]
        })
      });

      if (resp.ok) {
        const data = await resp.json();
        if (data.content && data.content[0]) {
          personalizedText = data.content[0].text;
        }
      }
    } catch(e) {
      // Fallback to static text
    }

    container.innerHTML = `
      <div class="quiz-result">
        <div class="quiz-result-icon">${d.icon}</div>
        <h3>${d.name}</h3>
        <p style="font-family:'Space Mono',monospace; font-size:0.65rem; letter-spacing:0.2em; color:${d.color}; margin-bottom:1.5rem;">${d.subtitle.toUpperCase()}</p>
        <div class="quiz-result-card">
          <p>${personalizedText}</p>
        </div>
        <p style="color:var(--text-dim); font-size:0.9rem; margin-bottom:0.5rem;">√Ä partir de</p>
        <p style="font-family:'Playfair Display',serif; font-size:2.5rem; color:var(--gold); font-weight:900;">${d.price}</p>
        <br>
        <button class="btn-primary" onclick="sendToChat('Je veux r√©server ${d.name}'); openChat();">R√©server maintenant ‚Üí</button>
        <br>
        <button class="quiz-reset" onclick="resetQuiz()">‚Ü∫ Recommencer le quiz</button>
      </div>
    `;
  }

  function resetQuiz() {
    quizAnswers = [];
    currentStep = 0;
    document.querySelectorAll('.quiz-step').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.quiz-dot').forEach((d, i) => {
      d.classList.remove('done');
      if (i === 0) d.classList.add('done');
    });
    document.getElementById('step-0').classList.add('active');
  }

  // ‚îÄ‚îÄ‚îÄ CHATBOT LOGIC ‚îÄ‚îÄ‚îÄ
  let chatOpen = false;
  let isTyping = false;

  const SYSTEM_PROMPT = `Tu es Chronos, l'assistant virtuel de TimeTravel Agency, une agence de voyage temporel de luxe fictive.
Ton r√¥le : conseiller les clients sur nos trois destinations exclusives, r√©pondre √† leurs questions et les aider √† r√©server.

Ton ton : professionnel et chaleureux, passionn√© d'histoire, enthousiaste mais jamais familier.

Tu connais parfaitement :
- Paris 1889 : Belle √âpoque, Exposition Universelle, inauguration Tour Eiffel, Impressionnistes, caf√©s parisiens, vie mondaine. Prix : 8 500 ‚Ç¨/personne. Dur√©e : 5 jours.
- Cr√©tac√© (‚àí65M ans) : dinosaures (T-Rex, Tric√©ratops, V√©lociraptor, Diplodocus), for√™ts primitives, volcans. Capsule blind√©e ultra-s√©curis√©e. Prix : 15 000 ‚Ç¨/personne. Dur√©e : 3 jours.
- Florence 1504 : Michel-Ange (David), L√©onard de Vinci, Rapha√´l, M√©dicis, naissance de la Renaissance. Prix : 9 800 ‚Ç¨/personne. Dur√©e : 5 jours.

Informations g√©n√©rales :
- Assurance temporelle incluse
- Guide historien sp√©cialis√© fourni
- V√™tements d'√©poque fournis (sauf Cr√©tac√©)
- Retour garanti dans 100% des cas
- Paiement en 12 fois sans frais possible

R√©ponds toujours en fran√ßais, de fa√ßon concise (max 120 mots par r√©ponse) et √©l√©gante.`;

  const conversationHistory = [];

  function toggleChat() {
    chatOpen = !chatOpen;
    document.getElementById('chatWindow').classList.toggle('open', chatOpen);
    document.querySelector('.chat-badge').style.display = 'none';
    if (chatOpen) document.getElementById('chatInput').focus();
  }

  function openChat() {
    chatOpen = true;
    document.getElementById('chatWindow').classList.add('open');
    document.querySelector('.chat-badge').style.display = 'none';
  }

  function closeChat() {
    chatOpen = false;
    document.getElementById('chatWindow').classList.remove('open');
  }

  function handleChatKey(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  }

  function sendToChat(text) {
    openChat();
    document.getElementById('chatInput').value = text;
    setTimeout(() => sendMessage(), 300);
  }

  function addMessage(content, role) {
    const messagesDiv = document.getElementById('chatMessages');
    const now = new Date().toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
    const msgDiv = document.createElement('div');
    msgDiv.className = `msg ${role}`;
    msgDiv.innerHTML = `
      <div class="msg-bubble">${content}</div>
      <div class="msg-time">${now}</div>
    `;
    messagesDiv.appendChild(msgDiv);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  function showTyping() {
    const messagesDiv = document.getElementById('chatMessages');
    const typingDiv = document.createElement('div');
    typingDiv.className = 'msg bot';
    typingDiv.id = 'typing-indicator';
    typingDiv.innerHTML = `
      <div class="typing-indicator">
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
      </div>
    `;
    messagesDiv.appendChild(typingDiv);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  function hideTyping() {
    const el = document.getElementById('typing-indicator');
    if (el) el.remove();
  }

  async function sendMessage() {
    const input = document.getElementById('chatInput');
    const text = input.value.trim();
    if (!text || isTyping) return;

    input.value = '';
    addMessage(text, 'user');
    conversationHistory.push({ role: 'user', content: text });

    isTyping = true;
    document.getElementById('chatSend').disabled = true;
    showTyping();

    try {
      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          model: 'claude-sonnet-4-5-20250929',
          max_tokens: 1000,
          system: SYSTEM_PROMPT,
          messages: conversationHistory
        })
      });

      hideTyping();

      if (!response.ok) throw new Error('API Error');

      const data = await response.json();
      const botReply = data.content[0].text;
      conversationHistory.push({ role: 'assistant', content: botReply });
      addMessage(botReply, 'bot');

    } catch (err) {
      hideTyping();
      // Fallback responses
      const fallbacks = {
        default: "Je vous remercie de votre int√©r√™t ! Pour des informations d√©taill√©es sur nos voyages temporels, n'h√©sitez pas √† parcourir nos destinations sur cette page. Nos conseillers humains sont disponibles par email : contact@timetravel.agency üï∞Ô∏è",
        paris: "Paris 1889, c'est la Belle √âpoque dans toute sa splendeur ! Inauguration de la Tour Eiffel, Exposition Universelle, caf√©s impressionnistes... 5 jours inoubliables √† partir de <strong>8 500 ‚Ç¨</strong>. Que souhaitez-vous savoir de plus ?",
        cretace: "Le Cr√©tac√© est notre destination la plus exclusive ! Observer des dinosaures en libert√© depuis notre capsule ultra-blind√©e, c'est une exp√©rience sans √©quivalent. 3 jours √† partir de <strong>15 000 ‚Ç¨</strong>. Votre s√©curit√© est garantie √† 100%.",
        florence: "Florence 1504, l'apog√©e de la Renaissance ! Michel-Ange sculpte le David, L√©onard peint... 5 jours au c≈ìur de la cr√©ation artistique la plus intense de l'histoire, √† partir de <strong>9 800 ‚Ç¨</strong>."
      };

      const msg = text.toLowerCase();
      let reply = fallbacks.default;
      if (msg.includes('paris') || msg.includes('1889') || msg.includes('eiffel')) reply = fallbacks.paris;
      else if (msg.includes('cr√©tac√©') || msg.includes('dinosaure') || msg.includes('jurassique')) reply = fallbacks.cretace;
      else if (msg.includes('florence') || msg.includes('michel') || msg.includes('renaissance')) reply = fallbacks.florence;

      conversationHistory.push({ role: 'assistant', content: reply });
      addMessage(reply, 'bot');
    }

    isTyping = false;
    document.getElementById('chatSend').disabled = false;
  }

  // ‚îÄ‚îÄ‚îÄ SCROLL REVEAL ‚îÄ‚îÄ‚îÄ
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

  document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

  // ‚îÄ‚îÄ‚îÄ NAV SCROLL ‚îÄ‚îÄ‚îÄ
  window.addEventListener('scroll', () => {
    const nav = document.querySelector('nav');
    if (window.scrollY > 50) {
      nav.style.background = 'rgba(8,8,16,0.97)';
    } else {
      nav.style.background = 'linear-gradient(to bottom, rgba(8,8,16,0.95), transparent)';
    }
  });
</script>

</body>
</html>
